<p>Have you ever had to start over on a piece of code because you overwrote something by accident? Made an edit, replaced it, and then wished you could go back?</p>
<p>Programmers have tools like <code>git</code> and the undo/redo stack to help them deal with challenges like this. Replit, of course, supports these things.</p>
<p>But, we think there&#39;s a better way. Over the last week, we rolled out the new history UI to general availability. Here&#39;s what it looks like:</p>
<p><video src="https://blog.replit.com/images/history2-release/history-story.mp4" class="css-3qjkrt" autoplay muted playsinline loop controls></video></p>
<h2>The Basics</h2>
<p>First, a bit of background. Whenever you make changes to your code, we add the <a href="https://en.wikipedia.org/wiki/Operational_transformation"><em>operational transformations</em></a> (OTs) to a log of activity for that file. OTs are part of our multiplayer infrastructure, they effectively store the &quot;intended change&quot; every time you edit a file. We use this for reconciling potential conflicts when many users edit a file simultaneously.</p>
<p>It turns out, this makes for a pretty cool approach to versioning and history. You don&#39;t have to do anything to benefit from it (it is happening anyway) and it produces a high-fidelity take on the historical states of your file, with no real mental overhead.</p>
<p><img src="https://blog.replit.com/images/history2-release/history-how-to-get-there.png" alt="A pointer to the &quot;Repl history&quot; link in the workspace"></p>
<h2>The Utility</h2>
<p>With version control system based history, like <code>git</code>, you have to make an active decision to create a commit, so your intermediary states get lost. Worse, for many users, the concepts and interface are difficult. We love <code>git</code>, but it is just a piece of the puzzle.</p>
<p>Here, you can browse a file&#39;s history, exploring it with the same interface that you normally use, seeing every change that has been made to it, and non-destructively restore to any specific version. We aimed for this to be lightweight, low-risk, and easy to use: a complement to the tools you are already using.</p>
<p><img src="https://blog.replit.com/images/history2-release/history-new-2.png" alt="A screenshot of the new history tool, showing a unit test suite written in JavaScript"></p>
<p>Once you&#39;ve found a version you think is relevant or interesting, you can toggle on compare mode to see a side-by-side diff. You can also select and copy some subset of the version or click restore to bring your file back to where it used to be.</p>
<p><img src="https://blog.replit.com/images/history2-release/history-diff-compare.png" alt="A screenshot of a side-by-side diff-view"></p>
<h2>The Fun</h2>
<p>One really cool way we&#39;ve been seeing people use this is to use the playback feature -- which lets you watch your file&#39;s history like it is a movie -- to make videos of their programming sessions.</p>
<p>We&#39;re going to do more to support sharing and social integration of these sessions going forward, but for now, it is already a really cool way to retroactively decide to share how you were thinking.</p>
<p>Some other neat upgrades:</p>
<ul>
<li><strong>Dark mode</strong>: Old history didn&#39;t support dark mode. Sorry. New history does though!</li>
<li><strong>Mobile support</strong>: Maybe you noticed that old history was real awkward on small screens? Mobile now gets first class history support!</li>
<li><strong>General polish</strong>: You can browse the file tree like you would in the rest of your Repl, interact with a particular version like it is your regular code: copy-and-paste, compare, restore, and more.</li>
</ul>
