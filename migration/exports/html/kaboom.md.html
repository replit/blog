<blockquote>
<p>Games are awesome, making games is even more awesome. I love making games, making games makes me happy, being happy makes me make better games, i hope everyone can be happy and enjoy making games!
-- me, today</p>
</blockquote>
<p><img src="https://blog.repl.it/images/kaboom/kaboom.png" alt="kaboom"></p>
<p>We at replit are thinking about ways to make programming more accissible, Kaboom is an effort to try make game making more accessible and fun for both beginners and intermediate programmers. I want to discuss some core designs of both the library and the editor here.</p>
<p>(it&#39;s strongly recommended first check out some examples on the kaboom website to get a quick taste of what kaboom looks like)</p>
<p><a href="https://kaboomjs.com/">Official website</a></p>
<p><a href="https://replit.com/kaboom/">Marketing page</a></p>
<div style="text-align: center;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/xF3--Ec_E-0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>

<h2>Flexible Component System</h2>
<p>Kaboom draws some inspiration from ECS and used a composable component approach to describe game objects. You create a game object like this:</p>
<pre><code class="language-js">const player = add([
    sprite(&quot;froggy&quot;),
    pos(20, 20),
    body(),
    &quot;killable&quot;,
    {
        health: 100,
        speed: 240,
    },
]);
</code></pre>
<p>each function in the list is an component, each component gives the game object soome behavior. For example, the <code>sprite()</code> comp tells the object what to draw, the <code>pos()</code> comp tells object where to draw, the <code>body()</code> comp tells the object that they should follow physics rules and fall by gravity. Raw objects are custom fields that gets directly assigned to the returned obj, raw strings like <code>&quot;killable&quot;</code> are tags which could be handy when defining group behaviors, we will talk about it later.</p>
<p>Each comp also provides the game object with certain methods and data, for example, <code>pos()</code> gives the object method <code>move()</code> to change position</p>
<pre><code class="language-js">keyDown(&quot;left&quot;, () =&gt; {
    player.move(-player.speed, 0);
});
</code></pre>
<p><code>sprite()</code> gives the object methods to play animation that&#39;s loaded with <code>loadSprite()</code> before</p>
<pre><code class="language-js">player.play(&quot;jump&quot;);
</code></pre>
<p><code>body()</code> gives the object a <code>jump()</code> function to jump</p>
<pre><code class="language-js">keyPress(&quot;space&quot;, () =&gt; {
    if (player.grounded()) {
        player.jump();
    }
});
</code></pre>
<p>under the hood, components are really simple, they&#39;re just functions that return an object, a slight simplified <code>sprite()</code> looks like this:</p>
<pre><code class="language-js">function sprite() {
    return {
        curAnim: null,
        frame: 0,
        add() {
            // add a default area() component on start
            this.use(area(/* calc  */));	
        },
        update() {
            // player anim (increase frame counter)
            if (this.curAnim) {
                this.frame += 1;
            }
        },
        draw() {
            // invokes the lower level draw function
            drawSprite(/* data */);
        },
        play(anim) {
            this.curAnim = anim;
        },
    };
}
</code></pre>
<p>there are special lifecycle functions like <code>add()</code>, <code>draw()</code> and <code>update()</code>, other functions and data are directly assigned to the game object itself.</p>
<h2>Describing Behaviors</h2>
<p><img src="https://blog.repl.it/images/kaboom/blocky.png" alt="blocky"></p>
<p>Kaboom provides a lot of primitives to describe behaviors, for example, the most function you&#39;ll be using might be</p>
<pre><code class="language-js">const player = add([
    // ...
]);

player.action(() =&gt; {
    player.health -= 1;
});
</code></pre>
<p><code>obj.action()</code> takes in a function and runs it everyframe as long as the object still exists in scene (not <code>destroy()</code>ed). </p>
<p>Remember you can give object tags by directly passing strings as components? Tags are powerful tools when defining behaviors of certain type of objects, e.g.</p>
<pre><code class="language-js">add([
    sprite(&quot;notmark&quot;),
    &quot;enemy&quot;,
]);

action(&quot;enemy&quot;, (e) =&gt; {
    const dir = e.pos.sub(player.pos).unit();
    e.pos = e.pos.add(dir.scale(ENEMY_SPEED));
    // i know no operation overloading sucks..
});

collides(&quot;enemy&quot;, &quot;killable&quot;, (e, k) =&gt; {
    destroy(e);
    destroy(k);
});
</code></pre>
<p>when we&#39;re creating enemies, we can give it an <code>&quot;enemy&quot;</code> tag and define behaviors for all objects that have tag <code>&quot;enemy&quot;</code>, in this case we&#39;re making all enemies move toward the player every frame, and check collision between all <code>&quot;enemy&quot;</code> and <code>&quot;killable&quot;</code>s, and destroy them both when any 2 of them collides.</p>
<p>the input handlers are also written in a similar fashion, making the overall code look blocky and event driven</p>
<pre><code class="language-js">keyPress(&quot;k&quot;, () =&gt; {
    // ...
});

mouseClick(() =&gt; {
    // ...
});
</code></pre>
<h2>Helpers</h2>
<p><img src="https://blog.repl.it/images/kaboom/level.png" alt="level"></p>
<p>Helping people is considered nice, and it&#39;s nice for a library to help out the developers! Kaboom provides some small helpers to build certain features easily, for example there&#39;s this <code>addLevel</code> function that let&#39;s you draw a level with ascii art and define what each symbol means, like</p>
<pre><code class="language-js">addLevel([
    &quot;        $    &quot;,
    &quot;      ====   &quot;,
    &quot;             &quot;,
    &quot;     ^^      &quot;,
    &quot;=============&quot;,
], {
    // defining grid size
    width: 12,
    height: 12,
    // defining what each symbol means
    &quot;=&quot;: [
        sprite(&quot;ground&quot;),
        solid(),
    ],
    &quot;$&quot;: [
        sprite(&quot;coin&quot;),
        &quot;coin&quot;,
    ],
});
</code></pre>
<p>with the handy component system, we just define each symbole as a list of components.</p>
<h2>Integrated Environment</h2>
<p><img src="https://blog.repl.it/images/kaboom/editor.png" alt="editor"></p>
<p>Finally get to Kaboom on replit!</p>
<p>Inspired by the Fantasy Consoles, we&#39;re thinking building an environment dedicated for building games, with replit&#39;s powerful infra on code editing, sharing and collab, it could become an exciting game making scene. The Kaboom replit is an integrated environment where you can edit and manage all your code + assets, and run game in one place. There&#39;s the classic code editor and runner, and there&#39;re sprite managers, sprite editor, debugger, in the future even sound editor and music makers. The editor is still in early dev, expect exciting features and improvements to come!</p>
<p><img src="https://blog.repl.it/images/kaboom/pedit.png" alt="pedit"></p>
<h2>Debug Tools</h2>
<p><img src="https://blog.repl.it/images/kaboom/debug.png" alt="debug"></p>
<p>Kaboom editor on replit also provides UI for kaboom&#39;s debug abilities, for example, you can enable</p>
<ul>
<li>&quot;Show Area&quot; to draw a bounding box on every object with an <code>area()</code> component</li>
<li>&quot;Hover Info&quot; to enable hovering an object to inspect its states, </li>
<li>&quot;Time Scale&quot; to scale the time, enables you to run the game in slow / high motion</li>
<li>&quot;Pause&quot; to pause the game at any moment</li>
<li>&quot;Step Frame&quot; to proceed to next frame, handy when paused</li>
</ul>
<p>Hope kaboom can help you guys make some cool stuff, happy game making!</p>
<p><img src="https://blog.repl.it/images/kaboom/chill.png" alt="chill"></p>
