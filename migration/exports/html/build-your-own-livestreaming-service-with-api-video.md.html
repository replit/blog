<p>With the recent shift in the popularity of remote work environments, the demand for livestreaming services has increased. Even prior to the shift, many global companies have used livestreaming services for their organization’s all-hands meetings. <a href="https://api.video/">api.video</a> provides APIs and SDKs that make it easier to build your own livestreaming service and host it on your website. Additionally, they also provide solutions for uploading videos, encoding videos, video delivery, and video analytics. Here are some of the specific features of api.video:</p>
<ul>
<li>You can <a href="https://api.video/upload/">securely upload</a> and store videos from your own user interface to api.video. The video can then be shared worldwide via their responsive video player. They also support progressive uploads that let you simultaneously upload large videos.</li>
<li>You can <a href="https://api.video/player/">customize your video player</a> by choosing a video player theme, adding your own thumbnail image, and adding your own logo.</li>
<li>You can <a href="https://api.video/live-streaming/">create your own livestreaming service</a>, which can either be done by using their API/SDK or by using their User Interface (i.e., you won’t have to code).</li>
<li>You can <a href="https://api.video/analytics/">access stats and analytics</a> about your videos to learn more about your users and their engagement.</li>
</ul>
<p>Some of the use cases for api.video include:</p>
<ul>
<li><strong>Video Classes:</strong> teachers and tutors can use api.video’s <a href="https://api.video/player/">video player</a> or livestream facilities to host their classes online. </li>
<li><strong>Product Instruction Manuals:</strong> companies can create videos on how to use their product and host it via api.video’s customizable <a href="https://api.video/player/">video player</a> on their own website.</li>
<li><strong>Livestreams:</strong> livestreams via api.video’s <a href="https://api.video/live-streaming/">livestream service</a> can be used for various purposes, such as gaming, coding, concerts, watch parties, and more.</li>
</ul>
<p>You can find more use cases on api.video’s blog <a href="https://api.video/blog/use-cases">here</a>.</p>
<p>In this tutorial, you will build your own livestream service using api.video’s <a href="https://github.com/apivideo/api.video-nodejs-client">Node.js Client</a>. You will then create a simple <a href="https://reactjs.org/">React</a> App to host your livestream. All the development will be done using <a href="https://replit.com/~"><em>Replit</em></a>, an in-browser IDE that supports more than fifty languages.</p>
<p>For easy access, here are some resources to help you follow along:</p>
<ul>
<li><a href="https://replit.com/@rahulbanerjee26/apivideo-live-stream-service-1#index.js">Code to create livestream service</a></li>
<li><a href="https://replit.com/@rahulbanerjee26/Api-Video-Live-Stream-View">React App</a></li>
<li><a href="https://github.com/rahulbanerjee26/api.video_live_stream">GitHub repo</a></li>
</ul>
<h2>Implementing Your Own Livestream Service</h2>
<p>The tutorial can be broken into three parts. In the first part, you will use api.video’s <a href="https://github.com/apivideo/api.video-nodejs-client">Node.js Client</a> to create your own livestream service. In the second part, you will create a simple React App to host your livestream service. The UI can be built using any framework you prefer. For this tutorial, we’ll stick with React. Finally, you will connect Zoom to your livestream service for users to be able to view it.</p>
<h3>Creating the Livestream Service</h3>
<p>Before proceeding, you will have to <a href="https://dashboard.api.video/register">create an account</a> with api.video. Once you have an account, log in and head over to your dashboard. Scroll down, and you should see a Sandbox API Key:</p>
<p><img src="https://i.imgur.com/T3ebpdj.png" alt="Sandbox API Key"></p>
<p>Copy this key. This will be used by api.video’s API to authenticate you. For this tutorial, you can work in a Sandbox environment.</p>
<p>Next, head over to <a href="https://replit.com/~">Replit</a>. If you do not already have an account, you can create one <a href="https://replit.com/signup">here</a>. Create a new repl and select Node.js for the template:</p>
<p><img src="https://i.imgur.com/Yg6Oph4.png" alt="Node.js Replit template"></p>
<p>Then, in your <code>index.js</code> file, you should see options to select a template. If you would like, you can try playing around with a template. However, for this tutorial, you can simply start from scratch.</p>
<p><img src="https://i.imgur.com/0CJ4LDv.png" alt="Templates for Node.js in Replit"></p>
<p>Save your api.video API Key as an environment variable. Replit has a feature that allows you to conveniently store your secrets as environment variables:</p>
<p><img src="https://i.imgur.com/HKnsnZf.png" alt="Environment variable in Replit"></p>
<p>Replace the value for the variable with your api.video Sandbox API Key. After you create your environment variable, you should see an option to insert a code snippet to import the variable:</p>
<p><img src="https://i.imgur.com/gu73Vyd.png" alt="Import env variable in Replit"></p>
<p>Here’s the code snippet to do so:</p>
<pre><code class="language-javascript">const API_KEY = process.env[&quot;API_KEY&quot;];
</code></pre>
<p>Next, you will have to install api.video’s <a href="https://github.com/apivideo/api.video-nodejs-client">Node.js Client Library</a>. Replit has a feature that allows you to search for packages and install them. Click on the <strong>box icon</strong> in the left sidebar and search for “@api.video/nodejs-client.”</p>
<p><img src="https://i.imgur.com/3DO06GH.png" alt="Install package in Replit"></p>
<p>Click on the <strong>plus icon</strong> to install the package. Optionally, you can use the <code>npm install</code> command in your repl’s shell to install it as well.</p>
<p>Import the package you just installed using this code:</p>
<pre><code class="language-javascript">const ApiVideoClient = require(&quot;@api.video/nodejs-client&quot;);
</code></pre>
<p>Now, create an asynchronous function to create the livestream service:</p>
<pre><code class="language-javascript">const liveStreamName = &quot;My Live Stream&quot;;

async function createLiveStream() {
 const client = new ApiVideoClient({ apiKey: API_KEY });
 const result = await client.liveStreams.create({
    name: liveStreamName,
 });
 return result;
}
</code></pre>
<p>You will have to use your API key when creating the client instance. The client instance has a method called <code>liveStreams.create</code> that lets you create the livestream service. You have to create a key-value pair for your livestream’s name. If you would like to add a thumbnail to your livestream, you can use the client instance’s <code>liveStreams.uploadThumbnail</code> method to do so:</p>
<pre><code class="language-javascript">async function addThumbnail(liveStreamID, filePath) {
  const client = new ApiVideoClient({ apiKey: API_KEY });
  const result = await client.liveStreams.uploadThumbnail(
    liveStreamID,
    filePath,
  );
  return result;
}
</code></pre>
<p>This is another asynchronous function, similar to the previous function. Here, it accepts a couple of parameters: the livestream ID that will be returned by api.video and the path of your JPG file. </p>
<p>Replit lets you upload files to your repl project. Go to <strong>Files</strong> in the sidebar. You can either drag and drop your image or click on the three dots and select <strong>Upload file</strong>.</p>
<p><img src="https://i.imgur.com/wSw2Lco.png" alt="Upload file"></p>
<p>If you need a thumbnail image, you can use <a href="https://imgur.com/qrxjvSp">this one</a>.</p>
<p>Next, call the function that creates the livestream service and its ID, which will be used to add the thumbnail. Use this code to do both:</p>
<pre><code class="language-javascript">createLiveStream()
  .then((res) =&gt; {
    console.log(&quot;Created a live stream resource successfully. Below is the Livestream resource&quot;);
    console.log(res);
    const liveStreamID = res[&quot;liveStreamId&quot;];
    const filePath = &quot;thumbnailImage.jpg&quot;;
    addThumbnail(liveStreamID, filePath)
      .then((res) =&gt; console.log(&quot;Added Thumbnail&quot;))
      .catch((err) =&gt; {
        console.log(`Encountered following error ${err} while adding thumbnail to live stream`);
      });
  })
  .catch((err) =&gt; {
    console.log(`Encountered following error ${err} while creating live stream resource`);
  });
</code></pre>
<p>If you stored your thumbnail image in the same level as your <code>index.js</code> file, the path is simply the name of the project. </p>
<p>If you want, you can also optionally install the <code>prettier</code> package to format your code. Once you have installed it, open the <code>package.json</code> file and add the following to your Scripts object:</p>
<pre><code class="language-json">&quot;prettier&quot;: &quot;prettier --write *.js&quot;
</code></pre>
<p>Now, you can head over to your repl’s shell and type the following command to format and prettify your code:</p>
<pre><code class="language-bash">npm run prettier
</code></pre>
<p>Once complete, you can run your code using either the shell or the green <strong>Run</strong> button. The output should look similar this:</p>
<p><img src="https://i.imgur.com/aSCK9Yw.png" alt="Ouput shown in Replit"></p>
<p>The output should have a key-value pair for the iframe of the livestream. You can use this iframe to display the livestream in your UI, so be sure to save the iframe value.</p>
<p>After you have created your livestream service, you can head to your api.video <a href="https://dashboard.api.video/livestreams">account dashboard</a> to view your livestreams.</p>
<p><img src="https://i.imgur.com/ineXmh9.png" alt="Dashboard"></p>
<h3>Creating the React UI</h3>
<p>To best manage your code, create a new repl for this step and select <strong>React.js</strong> for the template.</p>
<p><img src="https://i.imgur.com/jg7qzGY.png" alt="React.js template in Replit"></p>
<p>This will create a React boilerplate. You can run the app:</p>
<p><img src="https://i.imgur.com/gHgtufF.png" alt="Replit’s React App"></p>
<p>The URL is shown in the browser. In my case, it is: </p>
<pre><code>https://live-stream-UI.rahulbanerjee26.repl.co
</code></pre>
<p>If your repl is public, the URL can be accessed from anywhere and by anyone. Additionally, as long as your repl is running, the URL will render your React App. This is a really useful feature if you want to test your app on different screens or if you want to share it with other developers for testing. Replit also supports live reload by default, so any changes you make in your code will be reflected in the browser almost instantly.</p>
<p>For the UI, you can add some text and your livestream’s iframe element. Here is the component to use:</p>
<pre><code class="language-javascript">import React from &#39;react&#39;;
import &#39;./App.css&#39;;

function App() {
 return (
     &lt;main&gt;
         &lt;h1&gt;Welcome to my Live Stream&lt;/h1&gt;
         &lt;iframe 
             src=&quot;https://embed.api.video/live/li0133grn2X8KbXhiF1spqed&quot; 
             className=&#39;videoPlayer&#39;
             width=&quot;100%&quot;
             height=&quot;100%&quot; 
             frameborder=&quot;0&quot; 
             scrolling=&quot;no&quot; 
             allowfullscreen=&quot;true&quot;&gt;
         &lt;/iframe&gt;
     &lt;/main&gt;
  );
}

export default App;
</code></pre>
<p>Replace the iframe element with the iframe value you saved in the previous section. Then, head to your browser, and you should see your thumbnail image along with the text in the h1 tag. You can add some CSS to style the app if you’d like:</p>
<pre><code class="language-css">main {
     box-sizing: border-box;
     padding: 2vw;
     background: #faf3dd;
     height: 100vh;
}

main&gt;h1{
     text-align: center;
     color: #5e6472;
}

.videoPlayer{
     margin-top: 5vw;
     height: 60vh;
}
</code></pre>
<p>Replit adds a small box with a preview of the color next to your color hex codes. If you click on it, you should see a color picker to select a color of your choice.</p>
<p><img src="https://i.imgur.com/3po14W2.png" alt="Color picker in Replit"></p>
<p>After you have added your styling, your React App should look something like this:</p>
<p><img src="https://i.imgur.com/PXrwohc.png" alt="Screenshot of React App"></p>
<h3>Connecting Zoom to Your Livestream Service</h3>
<p>Log in to your Zoom account and create a meeting:</p>
<p><img src="https://i.imgur.com/xkb1rKR.png" alt="Zoom meeting"></p>
<p>After you create your meeting, go to your meeting information and scroll down to select <strong>Configure Custom Streaming Service</strong>.</p>
<p><img src="https://i.imgur.com/lIkwarT.png" alt="Zoom livestream"></p>
<p>Now, you will need some information from the livestream service you created in the previous steps. Head over to your api.video dashboard and go to your livestream service. Click on the <strong>See details</strong> option for the service. You should see your stream key and the RTMP Server URL. You’ll need both these values. Go back to your Zoom meeting details. For <strong>Stream URL</strong>, add the RTMP Server URL from api.video, and for <strong>Stream key</strong>, add your api.video livestream’s key. Then, for <strong>Live streaming page URL</strong>, add the URL to your React App. Here’s what my Zoom livestream configuration looks like:</p>
<p><img src="https://i.imgur.com/VQuf2nw.png" alt="Zoom meeting configuration"></p>
<p>When you are hosting your Zoom meeting, simply click on <strong>More</strong> &gt; <strong>Live on Custom Live Streaming Service</strong>. </p>
<p><img src="https://i.imgur.com/3Sol1bi.png" alt="Zoom livestream service"></p>
<p>Your React App should now display your livestream. I tried live sharing VS Code in my Zoom meeting, and here’s the result in the React App:</p>
<p><img src="https://i.imgur.com/Bgi7hmH.png" alt="Livestream React"></p>
<p>Since I am in the sandbox environment, there is a watermark. To remove it, you can upgrade to the production plan.</p>
<h2>Conclusion</h2>
<p>In this tutorial, you built your own livestreaming service using <a href="https://api.video/">api.video</a>. You also created a simple React App for others to view your livestream via Zoom. You were also introduced to <a href="https://replit.com/~"><em>Replit</em></a>, an in-browser IDE that can be used for livestreaming, among many other things. Although this tutorial only discussed support for Node.js and React, Replit supports other languages and frameworks as well, including C++, Python, Vue.js, Svelte, and more.</p>
<p>Replit also has support for unit tests and version control and comes with a built-in database. You can read about more projects done in Replit <a href="https://blog.replit.com/">on their blog</a>.</p>
