<p>Yesterday, I accidentally built a chat app. Surprisingly, it wasn&#39;t the first time it happened.</p>
<p><img src="https://blog.repl.it/images/chat/colors.jpeg" alt="colored chat screenshot"></p>
<p>Before I tell you how Hackernews turned (this blog&#39;s) <a href="https://blog.repl.it/__logs">HTTP logs</a> into chat, let me tell you about how a 12-year old user hacked the first chat app and community space on Replit right into a Python REPL.</p>
<p>In 2018 we didn&#39;t know we had such a strong community of tinkerers. We knew people make games with Replit and share it with other people. But we didn&#39;t realize we&#39;d already been a Schelling point for young hackers. </p>
<p>One day, <a href="https://repl.it/@pyelias">@pyelias</a> created a post on our support forum saying he built a Chatroom and linked to a repl. I thought it would be a simple chatbot or something similar because I hadn&#39;t seen internet-based apps on the platform until that point. We had just opened up <a href="https://blog.repl.it/internet-access">internet access</a> to everyone, but we didn&#39;t support web hosting or any advanced features Replit has today. It was a very constrained environment.</p>
<p>When I opened up Pyelias&#39; Chatroom, I saw a vibrant community. It was mindblowing. It was like suddenly discovering the chair you&#39;d been sitting on was made of gold. The community was not only fun, but it was also helpful, wholesome, and inviting.</p>
<p><img src="https://blog.repl.it/images/chat/chatroom.png" alt="chatroom screenshot"></p>
<p>The way the Chatroom worked: the repl acted as a terminal client. When you run the code, it connected to a remote database and pulled for the latest messages. The entire application logic was on the client. Over the next few days, I saw rapid iteration. It went from a simple Chatroom to something like IRC. It had rooms, private messages, colors, muting, and because it&#39;s on top of the Python repl, it also had support for inline code evaluation. </p>
<p>As the room grew, it naturally had problems with spam and bad actors. So it grew moderation features, filters, etc. Other users started contributing ideas and ways to improve it. It was magnificent and a model for making Replit a magical place for serendipitous computer explorations. </p>
<p>From there, we grew our community features, and today we have a fantastic <a href="https://repl.it/talk">forum</a> where people share apps and find other people to work with. In a future post, I&#39;ll tell how they built a fully programmable &quot;Stonk&quot; market. </p>
<h2>Hackernews chats in http logs</h2>
<p>In our blog&#39;s <a href="https://repl.it/@util/replit-blog#posts/internet-of-fun.md">repl</a> (where the app is hosted), I was writing something when I saw the HTTP logs in the console accelerate. For some reason, I knew it was hackernews, so I went there and saw <a href="https://news.ycombinator.com/item?id=25991988">the post</a> on the front page. I commented on it, saying that people can see the log stream by going to <a href="https://blog.repl.it/__logs">https://blog.repl.it/__logs</a></p>
<p><a href="https://news.ycombinator.com/item?id=25993765">andrewxhonson on Hackernews</a> visited the logs and saw an opportunity to chat. Because the blog was logging all the GET requests, you can effectively send &quot;messages&quot; to the logs by going to a path on the website (even if it doesn&#39;t exist). So for example, <code>https://blog.repl.it/hi%20my%20name%20is%20fred</code> resulted in a <code>GET hello my name is fred</code> log message. Now you have a streaming website that anyone can drop messages into -- i.e., a chat room!</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Hackernews found our blog logs and are new chatting in the HTTP requests. <a href="https://t.co/jYgwmMJRDP">https://t.co/jYgwmMJRDP</a> <a href="https://t.co/OkujyM8s3N">pic.twitter.com/OkujyM8s3N</a></p>&mdash; Amjad Masad (@amasad) <a href="https://twitter.com/amasad/status/1356344510465286144?ref_src=twsrc%5Etfw">February 1, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>I tweeted about it, and someone posted it on HN as a separate post, so it started growing. At first, people couldn&#39;t tell that Replit logs is a terminal complete with support for ANSI escape codes. I dropped that hint on HN comment, and they were off to the races. </p>
<p><img src="https://blog.repl.it/images/chat/colors.jpeg" alt="colored chat screenshot"></p>
<p>However, if you don&#39;t send an <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI reset</a> after your message, you&#39;re styling all the subsequent messages in the stream. I fixed that by adding a reset before each log message. I was coding live, so when I restarted the app, it broke and logged the syntax error to the console, which is actually the chatroom, and my users saw it. Not only do I have users on my accidental chatroom, they&#39;re also watching me work live and seeing my embarrassingly sloppy code (incidentally, that&#39;s why I love repl-driven coding you see the mistakes you make live and fix them quickly).</p>
<p><img src="https://blog.repl.it/images/chat/chat_style.png" alt="colored chat screenshot"></p>
<p>Yesterday, I had many meetings (I don&#39;t code full-time anymore, sadly) so I had to fix the Chatroom (I mean blog logs lol) incrementally between calls. Naturally, with growth came the bad actors. Someone started posting 10s of thousands of messages and spamming the chat. My first reaction was: &quot;wow it&#39;s amazing how resilient this webserver hosted on a single container!&quot; Then I thought about implementing rate-limiting and profanity filters. However, I had a meeting in the next 5 minutes. Instead, I put Cloudflare in front of the blog, and with a couple of firewall rules, the blocking started! </p>
<p><img src="https://blog.repl.it/images/chat/blocking.png" alt="colored chat screenshot"></p>
<p>Finally, before the day was over, I noticed that a <a href="https://repl.it/@ConnorBrewster/blog-chat">handful</a> of <a href="http://repl.chat/">clients</a> for the chat has emerged, and things thing has a life of their own. </p>
<p><img src="https://blog.repl.it/images/chat/client.png" alt="cloudflare rate limiting"></p>
<p>Even as I&#39;m writing this post in the repl, I can see the chat continue. There are now JSON messages and some weird protocol that&#39;s going on. Are people building apps on it? I&#39;m sure that will happen before the end of the week. After all, it&#39;s a full terminal, and you can make entire UIs on it. </p>
<p><img src="https://blog.repl.it/images/chat/more.jpeg" alt="json messages"></p>
<p>I&#39;m writing this story because we want to show the world that computers &amp; the internet are still fun. Hacking, tinkering, and weird experiments continue to happen on platforms like Replit. Because every repl on Replit is a full computer that comes with access to the network, a database, storage, and access to its code, user profiles, and other primitives, it makes it inherently amenable to serendipity and accidental software interactions. </p>
<p>I invite everyone to <a href="https://repl.it">sign up</a> and check out our <a href="https://repl.it/talk">community</a> and see what fun, weird things people are <a href="https://repl.it/talk/share">building</a>. Even if you&#39;re not interested in Replit the &quot;online IDE&quot; you might find that Replit, the &quot;weird internet computer&quot; will make you giddy programming (again).</p>
