{"_id":"post-a9b6d119-9b8f-4f30-81df-07197d34ba8a","_type":"post","title":"This Blog Hosts Itself","slug":{"_type":"slug","current":"dogfooding"},"body":[{"_key":"2a8cc24f45cf","children":[{"_type":"span","marks":[],"text":"As Repl.it has become more powerful we've used it to build and host many of our internal tools and parts of the site itself. This gives us a great opportunity to ","_key":"2a8cc24f45cf0"},{"_type":"span","marks":["4b4f07aaff74"],"text":"eat our own dog food","_key":"2a8cc24f45cf1"},{"_type":"span","marks":[],"text":" and in the process make Repl.it better.","_key":"2a8cc24f45cf2"}],"markDefs":[{"_key":"4b4f07aaff74","_type":"link","href":"https://en.wikipedia.org/wiki/Eating_your_own_dog_food"}],"_type":"block","style":"normal"},{"_key":"6bb56b038096","children":[{"_type":"span","marks":[],"text":"Most recently we moved our blog (the one you're reading right now) into a repl! Notice the \"edit on Repl.it\" in the upper right corner? That takes you straight to the markdown file for this particular blog post. The same repl is also embedded below, you can explore it right here, even fork and play around with it.","_key":"6bb56b0380960"}],"markDefs":[],"_type":"block","style":"normal"},{"_type":"embed","_id":"08da04bf-1353-42ef-96b7-72da0a7d7dc4","url":"https://repl.it/@turbio/replit-blog?lite=true","_key":"1b199b6b491a"},{"_key":"8e40966e9f07","children":[{"_type":"span","marks":[],"text":"But this isn't the only page build in a repl. When creating any new feature we try to first prototype on Repl.it and, if possible, host it there forever. Pages like our ","_key":"8e40966e9f070"},{"_type":"span","marks":["5e3f86ee6af8"],"text":"docs","_key":"8e40966e9f071"},{"_type":"span","marks":[],"text":", ","_key":"8e40966e9f072"},{"_type":"span","marks":["cf077b7c0fc1"],"text":"jobs","_key":"8e40966e9f073"},{"_type":"span","marks":[],"text":", and even the ","_key":"8e40966e9f074"},{"_type":"span","marks":["ed6c47b54c2c"],"text":"repl.run","_key":"8e40966e9f075"},{"_type":"span","marks":[],"text":" product are all hosted entirely in a repl. We've found repls lend themselves especially well to light self contained services. Many of our internal tools and some parts of the site work very well with the repl model.","_key":"8e40966e9f076"}],"markDefs":[{"_key":"5e3f86ee6af8","_type":"link","href":"https://docs.repl.it"},{"_key":"cf077b7c0fc1","_type":"link","href":"https://repl.it/site/jobs"},{"_key":"ed6c47b54c2c","_type":"link","href":"https://repl.run"}],"_type":"block","style":"normal"},{"_key":"b193b8244dcc","children":[{"_type":"span","marks":[],"text":"Boops","_key":"b193b8244dcc0"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"42cbfb279b76","children":[{"_type":"span","marks":[],"text":"We've found tracking pull requests across many repositories on Github has a lot of overhead. It isn't always clear what to review. Checking many repositories is time consuming and trying to use Github's notifications is a bit of a mess. To solve this we created ","_key":"42cbfb279b760"},{"_type":"span","marks":["e0709f384615"],"text":"Boops","_key":"42cbfb279b761"},{"_type":"span","marks":[],"text":". The concept is very simple: any PR with the label ","_key":"42cbfb279b762"},{"_type":"span","marks":["code"],"text":"boop","_key":"42cbfb279b763"},{"_type":"span","marks":[],"text":" will be listed on a shared board everyone can see. If you want your PR reviewd you add the ","_key":"42cbfb279b764"},{"_type":"span","marks":["code"],"text":"boop","_key":"42cbfb279b765"},{"_type":"span","marks":[],"text":" label. This alone might not be very useful but it becomes much more powerful when anyone can create repls to manipulate labels as they see fit. One repl \"The Unbooper\" goes around removing ","_key":"42cbfb279b766"},{"_type":"span","marks":["code"],"text":"boop","_key":"42cbfb279b767"},{"_type":"span","marks":[],"text":"s from any PRs with failing tests or unaddressed feedback. Another repl will automatically add ","_key":"42cbfb279b768"},{"_type":"span","marks":["code"],"text":"boop","_key":"42cbfb279b769"},{"_type":"span","marks":[],"text":" to a PR with the label ","_key":"42cbfb279b7610"},{"_type":"span","marks":["code"],"text":"preboop","_key":"42cbfb279b7611"},{"_type":"span","marks":[],"text":" if it passes the checks. There is of course a ","_key":"42cbfb279b7612"},{"_type":"span","marks":["code"],"text":"superboop","_key":"42cbfb279b7613"},{"_type":"span","marks":[],"text":" label you can add when you want to ward off the unbooper.","_key":"42cbfb279b7614"}],"markDefs":[{"_key":"e0709f384615","_type":"link","href":"https://repl.it/@turbio/boops"}],"_type":"block","style":"normal"},{"_key":"a8d7df6a4e8a","children":[{"_type":"span","marks":[],"text":"All together this creates a board with very high signal on PRs requiring human attention. Here's what our boop board looks like right now:","_key":"a8d7df6a4e8a0"}],"markDefs":[],"_type":"block","style":"normal"},{"_type":"embed","_id":"0a94b717-3ed0-4a19-850e-dc49a5cd308d","url":"https://boops.turbio.repl.co","_key":"7d59a32c3061"},{"_key":"20dd74070baa","children":[{"_type":"span","marks":[],"text":"Flags","_key":"20dd74070baa0"}],"markDefs":[],"_type":"block","style":"h2"},{"_type":"embed","_id":"e84998b9-6fda-44b3-831e-b7ac694b42e7","url":"https://mr-flags.turbio.repl.co","_key":"ca90164ab78f"},{"_key":"5e1ba1779a7f","children":[{"_type":"span","marks":[],"text":"Repl.run","_key":"5e1ba1779a7f0"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"8692bf41d394","children":[{"_type":"span","marks":["321f6904e395"],"text":"Repl.run","_key":"8692bf41d3940"},{"_type":"span","marks":[],"text":" turns any terminal app into a website you can share. To build this we leaned heavily on our existing infrastructure. The page is actually ","_key":"8692bf41d3941"},{"_type":"span","marks":["fd1b28e646cd"],"text":"hosted statically from a repl","_key":"8692bf41d3942"},{"_type":"span","marks":[],"text":" and starts up a fresh container using ","_key":"8692bf41d3943"},{"_type":"span","marks":["e52c81c31f2c"],"text":"our api","_key":"8692bf41d3944"},{"_type":"span","marks":[],"text":".","_key":"8692bf41d3945"}],"markDefs":[{"_key":"321f6904e395","_type":"link","href":"https://repl.run"},{"_key":"fd1b28e646cd","_type":"link","href":"https://repl.it/@util/replrun"},{"_key":"e52c81c31f2c","_type":"link","href":"https://crosis.turbio.repl.co/"}],"_type":"block","style":"normal"},{"_key":"f4e885dcc0d0","children":[{"_type":"span","marks":[],"text":"Jobs","_key":"f4e885dcc0d00"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"04c75ba57dd6","children":[{"_type":"span","marks":[],"text":"Our ","_key":"04c75ba57dd60"},{"_type":"span","marks":["cad95323790d"],"text":"jobs page","_key":"04c75ba57dd61"},{"_type":"span","marks":[],"text":" is actually just ","_key":"04c75ba57dd62"},{"_type":"span","marks":["4b72695c4d85"],"text":"a bash repl","_key":"04c75ba57dd63"},{"_type":"span","marks":[],"text":". We ues the ","_key":"04c75ba57dd64"},{"_type":"span","marks":["0c91129befd1"],"text":"repl.run","_key":"04c75ba57dd65"},{"_type":"span","marks":[],"text":" . You can check out the source repl over here ","_key":"04c75ba57dd66"},{"_type":"span","marks":["b3d83a232845"],"text":"https://repl.it/@util/jerbs","_key":"04c75ba57dd67"},{"_type":"span","marks":[],"text":".","_key":"04c75ba57dd68"}],"markDefs":[{"_key":"cad95323790d","_type":"link","href":"https://repl.it/site/jobs"},{"_key":"4b72695c4d85","_type":"link","href":"ttps://repl.it/@util/jerbs"},{"_key":"0c91129befd1","_type":"link","href":"https://jerbs.util.repl.run/"},{"_key":"b3d83a232845","_type":"link","href":"https://repl.it/@util/jerbs"}],"_type":"block","style":"normal"},{"_key":"f565c95e3ec1","children":[{"_type":"span","marks":[],"text":"self checks","_key":"f565c95e3ec10"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"f286d8d6085d","children":[{"_type":"span","marks":[],"text":"prometheus exporer","_key":"f286d8d6085d0"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"e1e5b8b9d709","children":[{"_type":"span","marks":[],"text":"kue metrics","_key":"e1e5b8b9d7090"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"712947cbb11c","children":[{"_type":"span","marks":[],"text":"log metrics","_key":"712947cbb11c0"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"adc975f07076","children":[{"_type":"span","marks":[],"text":"bundle checker","_key":"adc975f070760"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"b8cf736d309a","children":[{"_type":"span","marks":[],"text":"install all of pypi","_key":"b8cf736d309a0"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"2d709a76795e","children":[{"_type":"span","marks":[],"text":"deploys","_key":"2d709a76795e0"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"7bb61880279b","children":[{"_type":"span","_key":"7bb61880279b0","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"9e65b2a8e01c","children":[{"_type":"span","marks":[],"text":"/deploy","_key":"9e65b2a8e01c0"}],"markDefs":[],"_type":"block","style":"h1"},{"_key":"28fd1e2ac1e9","children":[{"_type":"span","marks":[],"text":"repl forks and runs another repl for every deploy","_key":"28fd1e2ac1e90"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"5188415dbfef","children":[{"_type":"span","marks":[],"text":"map reduce?","_key":"5188415dbfef0"}],"markDefs":[],"_type":"block","style":"h1"},{"_key":"5e536b1f627c","children":[{"_type":"span","marks":[],"text":"python packge resolver","_key":"5e536b1f627c0"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"ea170e76c0cb","children":[{"_type":"span","marks":[],"text":"install every package on pypi to figure out what it provides","_key":"ea170e76c0cb0"}],"markDefs":[],"_type":"block","style":"normal"}]}