{"_id":"post-8019d0d2-8105-4802-bdd7-9c50c3ea0ed2","_type":"post","title":"AI Agent Code Execution","slug":{"_type":"slug","current":"ai-agents-code-execution"},"body":[{"_key":"f3c471ba5f8a","children":[{"_type":"span","_key":"f3c471ba5f8a0","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_type":"image","_sanityAsset":"image@https://blog.replit.com/images/ai-agents/ai-agents-cover.png","_key":"5245b59e381e"},{"_key":"8c925c7dc0fa","children":[{"_type":"span","marks":[],"text":"Lately, there has been a proliferation of new ways to leverage Large Language Models (LLMs) to do all sorts of things that were previously thought infeasible. But the current generation of LLMs still have limitations: they are not able to get exact answers to questions that require specific kinds of reasoning (solving some math questions, for example); similarly, they cannot dynamically react to recent knowledge beyond a particular context window (anything that happened after their training cutoff window comes to mind). Despite these shortcomings, progress has not stopped: there have been advances in building systems around LLMs to augment their capabilities so that their weaknesses are no longer limitations. We are now in an age where ","_key":"8c925c7dc0fa0"},{"_type":"span","marks":["f85c98ef4e29"],"text":"AI agents","_key":"8c925c7dc0fa1"},{"_type":"span","marks":[],"text":" can interact with multiple underlying LLMs optimized for different aspects of a complex workflow. We are truly living in exciting times!","_key":"8c925c7dc0fa2"}],"markDefs":[{"_key":"f85c98ef4e29","_type":"link","href":"https://en.wikipedia.org/wiki/Intelligent_agent"}],"_type":"block","style":"normal"},{"_key":"f39578241cf2","children":[{"_type":"span","marks":[],"text":"LLMs are pretty good at ","_key":"f39578241cf20"},{"_type":"span","marks":["b2bc5fbe4e76"],"text":"generating algorithms in the form of code","_key":"f39578241cf21"},{"_type":"span","marks":[],"text":", and the most prominent application of that particular task has been coding assistants. But a more significant use case that applies to everyone (not just software engineers) is the ability to outsource other kinds of reasoning. One way to do that is in terms of sequences of instructions to solve a problem, and that sounds pretty much like the textbook definition of an ","_key":"f39578241cf22"},{"_type":"span","marks":["48b06b596daf"],"text":"algorithm","_key":"f39578241cf23"},{"_type":"span","marks":[],"text":". Currently, doing that at a production-level scale is challenging because leveraging LLMs' code generation capabilities for reasoning involves running untrusted code, which is difficult for most users. Providing an easy path for AI Agents to evaluate code in a sandboxed environment so that any ","_key":"f39578241cf24"},{"_type":"span","marks":["5da1d2227f53"],"text":"accidents or mistakes","_key":"f39578241cf25"},{"_type":"span","marks":[],"text":" would not be catastrophic will unlock all sorts of new use cases. And we already see the community building upon this idea in projects like ","_key":"f39578241cf26"},{"_type":"span","marks":["dfa711583967"],"text":"open-interpreter","_key":"f39578241cf27"},{"_type":"span","marks":[],"text":".","_key":"f39578241cf28"}],"markDefs":[{"_key":"b2bc5fbe4e76","_type":"link","href":"https://blog.replit.com/llm-training"},{"_key":"48b06b596daf","_type":"link","href":"https://en.wikipedia.org/wiki/Algorithm"},{"_key":"5da1d2227f53","_type":"link","href":"https://arxiv.org/abs/2308.1033"},{"_key":"dfa711583967","_type":"link","href":"https://github.com/KillianLucas/open-interpreter"}],"_type":"block","style":"normal"},{"_key":"1036434d8211","children":[{"_type":"span","marks":[],"text":"Two options","_key":"1036434d82110"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"a77d46961c83","children":[{"_type":"span","marks":[],"text":"But how should this sandbox behave? We have seen examples of multiple use cases. ","_key":"a77d46961c830"},{"_type":"span","marks":["178047f4f427"],"text":"Google's Bard recently released \"implicit code execution","_key":"a77d46961c831"},{"_type":"span","marks":[],"text":",” which seems to be used primarily for math problems. The problem is boiled down to computing the evaluation of a function over a single input and then returning the result. As such, it is inherently stateless and should be able to handle a high volume of requests at low latency.","_key":"a77d46961c832"}],"markDefs":[{"_key":"178047f4f427","_type":"link","href":"https://blog.google/technology/ai/bard-improved-reasoning-google-sheets-export/"}],"_type":"block","style":"normal"},{"_key":"44256e009ce9","children":[{"_type":"span","marks":[],"text":"On the other hand, ","_key":"44256e009ce90"},{"_type":"span","marks":["368ed86ab316"],"text":"ChatGPT","_key":"44256e009ce91"},{"_type":"span","marks":[],"text":" sessions could benefit from a more stateful execution, where there is a complete project with added files and dependencies, and outputs that can be fetched later. The project can then evolve throughout the session to minimize the amount of context needed to keep track of the state. With this use case, it's fine for the server to take a bit longer to initialize since the project will be maintained for the duration of the chat session.","_key":"44256e009ce92"}],"markDefs":[{"_key":"368ed86ab316","_type":"link","href":"https://openai.com/chatgpt"}],"_type":"block","style":"normal"},{"_key":"a0220e432efb","children":[{"_type":"span","marks":[],"text":"Since we know that there are a lot of people with these requirements out there, we made a prototype of both of these approaches where the sandbox runs in the Replit infrastructure (since we already have the technology to run untrusted code). We're releasing one as a self-serve platform for the community to experiment with!","_key":"a0220e432efb0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"957b13217151","children":[{"_type":"span","marks":[],"text":"code-exec","_key":"957b132171510"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"f468bb9aa2f8","children":[{"_type":"span","marks":[],"text":"The first approach is a stateless container server that is deployable through ","_key":"f468bb9aa2f80"},{"_type":"span","marks":["3efaee3c54fd"],"text":"Replit Autoscale Deployments","_key":"f468bb9aa2f81"},{"_type":"span","marks":[],"text":": ","_key":"f468bb9aa2f82"},{"_type":"span","marks":["90d8ca1ef15b"],"text":"https://replit.com/@luisreplit/eval-python","_key":"f468bb9aa2f83"},{"_type":"span","marks":[],"text":".","_key":"f468bb9aa2f84"}],"markDefs":[{"_key":"3efaee3c54fd","_type":"link","href":"https://blog.replit.com/autoscale"},{"_key":"90d8ca1ef15b","_type":"link","href":"https://replit.com/@luisreplit/eval-python"}],"_type":"block","style":"normal"},{"_key":"91a322127e08","children":[{"_type":"span","_key":"91a322127e080","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_type":"image","_sanityAsset":"image@https://blog.replit.com/images/ai-agents/py-eval-demo.mp4","_key":"39ae44b1ea96"},{"_key":"5ce3e86cf231","children":[{"_type":"span","marks":[],"text":"You can easily customize the Docker container image you’ll use and add all your necessary dependencies. Requests are handled in as little as 100ms and use the ","_key":"5ce3e86cf2310"},{"_type":"span","marks":["f55dbda2c4b4"],"text":"omegajail","_key":"5ce3e86cf2311"},{"_type":"span","marks":[],"text":" unprivileged container sandbox. This solution works best for simple math evaluation using Python and can be easily integrated with your OpenAI application with GPT-3.5 and GPT-4 support for ","_key":"5ce3e86cf2312"},{"_type":"span","marks":["b1c2fae86255"],"text":"custom function invocation","_key":"5ce3e86cf2313"},{"_type":"span","marks":[],"text":". ","_key":"5ce3e86cf2314"},{"_type":"span","marks":["a9bdc3c086d4"],"text":"Here's a simple example","_key":"5ce3e86cf2315"},{"_type":"span","marks":[],"text":" that allows you to ask arbitrary math questions and get the final answer instead of evaluating the code yourself. You can integrate it into your code by installing the ","_key":"5ce3e86cf2316"},{"_type":"span","marks":["a6c530e5c804"],"text":"replit-code-exec","_key":"5ce3e86cf2317"},{"_type":"span","marks":[],"text":" package and reading the full docs in the ","_key":"5ce3e86cf2318"},{"_type":"span","marks":["9ea6629dee13"],"text":"GitHub repository","_key":"5ce3e86cf2319"},{"_type":"span","marks":[],"text":". You can deploy this very cheaply for experimentation since you’re only charged for the time your Deployment actively uses CPU.","_key":"5ce3e86cf23110"}],"markDefs":[{"_key":"f55dbda2c4b4","_type":"link","href":"https://github.com/omegaup/omegajail"},{"_key":"b1c2fae86255","_type":"link","href":"https://openai.com/blog/function-calling-and-other-api-updates"},{"_key":"a9bdc3c086d4","_type":"link","href":"https://replit.com/@luisreplit/MathSolver"},{"_key":"a6c530e5c804","_type":"link","href":"https://pypi.org/project/replit-code-exec/"},{"_key":"9ea6629dee13","_type":"link","href":"https://github.com/replit/replit-code-exec"}],"_type":"block","style":"normal"},{"_key":"686368da32d2","children":[{"_type":"span","_key":"686368da32d20","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_type":"image","_sanityAsset":"image@https://blog.replit.com/images/ai-agents/math-solver.mp4","_key":"a1bc7b410ce3"},{"_key":"79b133c574cc","children":[{"_type":"span","marks":[],"text":"agent-env","_key":"79b133c574cc0"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"70f050484d66","children":[{"_type":"span","marks":[],"text":"The second prototype is a more stateful one, and it uses a full Repl as the sandbox. With this, you can install any packages after creation and also read and write files, as well as arbitrary programs, giving your agent complete control over the execution environment. The Repl will automatically terminate after some period of inactivity. This prototype is more experimental, but you can read the ","_key":"70f050484d660"},{"_type":"span","marks":["f1197933e34f"],"text":"documentation","_key":"70f050484d661"},{"_type":"span","marks":[],"text":" for more information. If you're interested in developing with this, please ","_key":"70f050484d662"},{"_type":"span","marks":["d0699b32a93e"],"text":"sign up to have a call with us","_key":"70f050484d663"},{"_type":"span","marks":[],"text":" so that we understand your use case better.","_key":"70f050484d664"}],"markDefs":[{"_key":"f1197933e34f","_type":"link","href":"https://www.npmjs.com/package/@replit/agent-env"},{"_key":"d0699b32a93e","_type":"link","href":"https://docs.google.com/forms/d/1UKbl9lOpRGUTfRdPx84g9hHb1-_3oS_G5eHvAzDdkNI/viewform"}],"_type":"block","style":"normal"},{"_key":"6d95a75058d8","children":[{"_type":"span","marks":[],"text":"The future","_key":"6d95a75058d80"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"58f8a39f98e0","children":[{"_type":"span","marks":[],"text":"We will keep experimenting with new ways of augmenting the capabilities of LLMs: this is just the beginning for us. We wanted to release these tools because we know you'll build something amazing with Replit. Please ","_key":"58f8a39f98e00"},{"_type":"span","marks":["6b8891e58536"],"text":"shoot us an email","_key":"58f8a39f98e01"},{"_type":"span","marks":[],"text":" if you want to chat with us about how code execution can augment LLMs. Also, we're hiring, so if this interests you, make sure to ","_key":"58f8a39f98e02"},{"_type":"span","marks":["5c5337dfa3ad"],"text":"apply for one of our open positions","_key":"58f8a39f98e03"},{"_type":"span","marks":[],"text":".","_key":"58f8a39f98e04"}],"markDefs":[{"_key":"6b8891e58536","_type":"link","href":"mailto:luis@replit.com, faris@replit.com"},{"_key":"5c5337dfa3ad","_type":"link","href":"https://replit.com/site/careers"}],"_type":"block","style":"normal"}],"publishedAt":"2023-09-19T00:00:00.000Z"}