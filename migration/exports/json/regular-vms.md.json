{"_id":"post-d034157a-b2cc-4b27-bcda-fe77dfcd4f93","_type":"post","title":"Hackers, Pros, and Teams users can now code for hours without restarts","slug":{"_type":"slug","current":"regular-vms"},"body":[{"_key":"6b796c7d09c4","children":[{"_type":"span","_key":"6b796c7d09c40","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"b7c5a013fe0d","children":[{"_type":"span","marks":[],"text":"Stay Connected","_key":"b7c5a013fe0d0"}],"markDefs":[],"_type":"block","style":"h3"},{"_key":"3854e5093d8d","children":[{"_type":"span","marks":[],"text":"Starting today, all users on Hacker, Pro, or Teams plans will see a 10x reduction in container restarts while coding in the Workspace. Previously, you would experience a restart at least once an hour. Now you can code for multiple hours straight without restarts. Deep work can stay uninterrupted and you can keep programs running longer while you build.","_key":"3854e5093d8d0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"7736f01ba79d","children":[{"_type":"span","marks":[],"text":"Repls are computers that live in the cloud. One of the most painful experiences with a cloud computer is losing your network link. Sometimes your network flakes out and things need to reconnect. But the worst version is when your Repl restarts. There are lots of reasons why this can happen. In the background, your container has stopped or died, and our infrastructure quickly starts up a new one to put you in. You can simulate this by typing kill 1 in the Shell.","_key":"7736f01ba79d0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"975cb6f54be7","children":[{"_type":"span","_key":"975cb6f54be70","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"0a7abc64c6fc","children":[{"_type":"span","marks":[],"text":"When that happens, your running process stops, all your services restart, and the working memory of your program is lost. It breaks your flow, the most precious feeling when creating software.","_key":"0a7abc64c6fc0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"e514cab5f7a1","children":[{"_type":"span","marks":[],"text":"Starting today, that’s going to happen much less often for Hacker, Pro, and Teams users. Instead of multiple restarts per hour, you should only see 1-2 per day (typically because we released new code, we’re working on eliminating those ones).","_key":"e514cab5f7a10"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"2afb912cb5a6","children":[{"_type":"span","marks":[],"text":"How did we do this? First, a quick explainer on how Cloud VM pricing works.","_key":"2afb912cb5a60"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"fb8c13c9a2a5","children":[{"_type":"span","marks":[],"text":"Cloud VMs, spot pricing, and preemptions","_key":"fb8c13c9a2a50"}],"markDefs":[],"_type":"block","style":"h3"},{"_key":"b9d0cfdd5753","children":[{"_type":"span","marks":[],"text":"Underlying your Repl is a Docker container. We have a system managing those containers called ","_key":"b9d0cfdd57530"},{"_type":"span","marks":["cbb84af70a75"],"text":"conman","_key":"b9d0cfdd57531"},{"_type":"span","marks":[],"text":". And conman runs on virtual machines (VMs) on Google Cloud Platform.","_key":"b9d0cfdd57532"}],"markDefs":[{"_key":"cbb84af70a75","_type":"link","href":"https://blog.replit.com/geo-part-3-deploy"}],"_type":"block","style":"normal"},{"_key":"8c4755cb2aff","children":[{"_type":"span","marks":[],"text":"Replit’s mission is to bring the next billion software creators online. To do that, we give a free computer in the cloud to anybody who wants to learn to code, earn a Bounty, build a viral app, or start a new business. This is a cost management challenge, and one of the ways we handle it is purchasing VMs at the “","_key":"8c4755cb2aff0"},{"_type":"span","marks":["f795f5e8e90b"],"text":"spot rate","_key":"8c4755cb2aff1"},{"_type":"span","marks":[],"text":"”.","_key":"8c4755cb2aff2"}],"markDefs":[{"_key":"f795f5e8e90b","_type":"link","href":"https://cloud.google.com/compute/docs/instances/spot"}],"_type":"block","style":"normal"},{"_key":"b9b6a3e9be0d","children":[{"_type":"span","marks":[],"text":"Spot rate machines are essentially spare machines that cloud providers have in any given data center. Providers offer large discounts to use these spare machines. But the catch is that sometimes those spare machines are needed by a user who is willing to pay full price. That means where the spare machines are located can change quickly. So if you’re using a spot rate VM, you can be “","_key":"b9b6a3e9be0d0"},{"_type":"span","marks":["297aec040d26"],"text":"preempted","_key":"b9b6a3e9be0d1"},{"_type":"span","marks":[],"text":"” and kicked out of the machine when somebody comes along to pay full price for it.","_key":"b9b6a3e9be0d2"}],"markDefs":[{"_key":"297aec040d26","_type":"link","href":"https://cloud.google.com/compute/docs/instances/preemptible"}],"_type":"block","style":"normal"},{"_key":"95d432067e73","children":[{"_type":"span","marks":[],"text":"It’s kind of like flying standby with an airline. You’ll get a discount, but no promise you’re getting the flight or route you asked for.","_key":"95d432067e730"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"ed63fdad2fde","children":[{"_type":"span","marks":[],"text":"We do a lot of work to hide preemptions and move you to a new, available, spot rate machine quickly and seamlessly. But that dreaded reconnect is the price.","_key":"ed63fdad2fde0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"85d3254ed2fe","children":[{"_type":"span","marks":[],"text":"Spending recent cost savings on making Replit better","_key":"85d3254ed2fe0"}],"markDefs":[],"_type":"block","style":"h3"},{"_key":"89ea9492fabd","children":[{"_type":"span","marks":[],"text":"We’ve been doing a lot of work to enforce limits on the platform more consistently. You’ve seen us set limits on ","_key":"89ea9492fabd0"},{"_type":"span","marks":["e027c24c6e27"],"text":"concurrently running Repls","_key":"89ea9492fabd1"},{"_type":"span","marks":[],"text":" and ","_key":"89ea9492fabd2"},{"_type":"span","marks":["25aa496f631f"],"text":"outbound data transfer","_key":"89ea9492fabd3"},{"_type":"span","marks":[],"text":", which has led to significant cost savings on abusive use. But we also know having limits enforced can be frustrating.","_key":"89ea9492fabd4"}],"markDefs":[{"_key":"e027c24c6e27","_type":"link","href":"https://blog.replit.com/repl-status"},{"_key":"25aa496f631f","_type":"link","href":"https://blog.replit.com/announcing-outbound-data-transfer-limits"}],"_type":"block","style":"normal"},{"_key":"8a301e8b3f3c","children":[{"_type":"span","marks":[],"text":"So now, thanks to those savings and deeper partnership with Google Cloud, we can spend more money on the core product experience. We’ve upgraded all Hacker, Pro, and Teams user VMs from spot rate to regular provisioning when coding in the Workspace.","_key":"8a301e8b3f3c0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"f4ccb43d1f07","children":[{"_type":"span","marks":[],"text":"On the Platform Team, we like to play a game called “guess when the change landed”. See if you can figure out when we moved from spot rate to regular machines from this graph of VM preemptions:","_key":"f4ccb43d1f070"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"b09b0e3fd1c8","children":[{"_type":"span","_key":"b09b0e3fd1c80","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"86c7e3a030b4","children":[{"_type":"span","marks":[],"text":"Enjoy your uninterrupted deep work sessions!","_key":"86c7e3a030b40"}],"markDefs":[],"_type":"block","style":"normal"}],"publishedAt":"2023-04-06T00:00:00.000Z"}