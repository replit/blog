{"_id":"post-7a18b5af-49aa-4dfd-bd13-e5be93364a89","_type":"post","title":"Servers just got 4x more powerful","slug":{"_type":"slug","current":"powerful-servers"},"body":[{"_key":"bf5a18e871c5","children":[{"_type":"span","marks":[],"text":"This week, we’ve rolled out a change for our Hacker plan subscribers: your servers have up to 4x the speed!","_key":"bf5a18e871c50"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"734a4fd41977","children":[{"_type":"span","marks":[],"text":"As Hackers know, every repl they start gets two vCPUs. This is all great when you’re hacking on your latest idea or getting a start on an assignment for school. But what about your ","_key":"734a4fd419770"},{"_type":"span","marks":["a0c074cfcfc1"],"text":"servers","_key":"734a4fd419771"},{"_type":"span","marks":[],"text":"? Previously, these would have received the default starter plan resources unless you were actively editing them on Replit. But no longer: now, any repl that we start on your behalf has the limits that you pay for, even if you’re not actively logged in to Replit. This means that all of your servers will be able to make use of Hacker plan vCPU and memory resources.","_key":"734a4fd419772"}],"markDefs":[{"_key":"a0c074cfcfc1","_type":"link","href":"https://docs.repl.it/repls/http-servers"}],"_type":"block","style":"normal"},{"_key":"a0d599866f44","children":[{"_type":"span","marks":[],"text":"If you’ve been looking for more powerful repls, add a Boost using ","_key":"a0d599866f440"},{"_type":"span","marks":["53d7db00462b"],"text":"Cycles","_key":"a0d599866f441"},{"_type":"span","marks":[],"text":" or ","_key":"a0d599866f442"},{"_type":"span","marks":["0ed86440dbfb"],"text":"subscribe to Hacker","_key":"a0d599866f443"},{"_type":"span","marks":[],"text":" today!","_key":"a0d599866f444"}],"markDefs":[{"_key":"53d7db00462b","_type":"link","href":"https://replit.com/cycles"},{"_key":"0ed86440dbfb","_type":"link","href":"https://replit.com/pricing"}],"_type":"block","style":"normal"},{"_key":"88bd72bd289e","children":[{"_type":"span","marks":[],"text":"How we start servers","_key":"88bd72bd289e0"}],"markDefs":[],"_type":"block","style":"h3"},{"_key":"d10ac6e32088","children":[{"_type":"span","marks":[],"text":"The backbone of our repl server infrastructure is a component that we dryly call \"proxy.\" Proxy is responsible for terminating all incoming traffic to servers. This traffic is usually directed to hostnames such as \"slug.user.repl.co\" but proxy also handles custom names such as blog.repl.it (yes, of course ","_key":"d10ac6e320880"},{"_type":"span","marks":["7b92fe0f702c"],"text":"this blog is a repl","_key":"d10ac6e320881"},{"_type":"span","marks":[],"text":"!).","_key":"d10ac6e320882"}],"markDefs":[{"_key":"7b92fe0f702c","_type":"link","href":"https://repl.it/@util/replit-blog#posts/powerful-servers.md"}],"_type":"block","style":"normal"},{"_key":"852220202582","children":[{"_type":"span","marks":[],"text":"When proxy receives an HTTP request, it first determines the globally-unique identifier for the repl associated with the hostname. It then determines if the repl is already running in a container in another component of our infrastructure called \"conman,\" which is responsible for running repls in Linux containers.","_key":"8522202025820"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"b7ca6059f763","children":[{"_type":"span","marks":[],"text":"The case we’re interested in here is when proxy receives a request to a repl that is not running. One of my favorite Replit features is that in this case we’ll do a \"wakeup\" where the proxy tells our infrastructure to start a container for the requested repl and automatically hits the Run button in that repl. When the proxy does this, however, it has no knowledge of repl owner’s plan, meaning that it cannot determine whether the owner has the Hacker plan, and it cannot tell conman what limits to apply to the repl’s container.","_key":"b7ca6059f7630"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"9d7573767e6e","children":[{"_type":"span","marks":[],"text":"To fix this, we started caching the most-recently-used resource limits that we see for every repl owner inside of conman. Conman is then able to refer to these resources when it receives a request to start a container from proxy. The end result is that if someone has Hacker plan, their servers will also be started with Hacker resources.","_key":"9d7573767e6e0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"e11b121f6447","children":[{"_type":"span","marks":[],"text":"If this has caught your eye, take a look at ","_key":"e11b121f64470"},{"_type":"span","marks":["23f9ce6ab559"],"text":"our jobs repl","_key":"e11b121f64471"},{"_type":"span","marks":[],"text":" and get in touch with us!","_key":"e11b121f64472"}],"markDefs":[{"_key":"23f9ce6ab559","_type":"link","href":"https://repl.it/site/jobs"}],"_type":"block","style":"normal"}],"publishedAt":"2020-12-15T21:25:18.000Z"}