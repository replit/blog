{"_id":"post-9c931a0a-f526-43b3-984a-a9cc8061c340","_type":"post","title":"Betting on Nix: donating $25K to the NixOS Foundation","slug":{"_type":"slug","current":"betting-on-nix"},"body":[{"_key":"760edee23c96","children":[{"_type":"span","marks":[],"text":"As building software grows more like snapping Legos together, how people find and use those Legos becomes more important. That's why we are donating $25,000 to the ","_key":"760edee23c960"},{"_type":"span","marks":["38504ade54be"],"text":"NixOS Foundation","_key":"760edee23c961"},{"_type":"span","marks":[],"text":" and betting on Nix as the future of software distribution.","_key":"760edee23c962"}],"markDefs":[{"_key":"38504ade54be","_type":"link","href":"https://nixos.org/community/index.html"}],"_type":"block","style":"normal"},{"_key":"d77970065ac0","children":[{"_type":"span","marks":[],"text":"In software, the Lego pieces are called packages. A package may be some code your program needs to call (a library) or another program your code needs to run. Historically, people have used package managers to find and install packages into their projects. Each language ecosystem has its own package manager. Replit built and open-sourced the ","_key":"d77970065ac00"},{"_type":"span","marks":["aa8a1fcff9b7"],"text":"Universal Package Manager","_key":"d77970065ac01"},{"_type":"span","marks":[],"text":" to unify this fragmented landscape.","_key":"d77970065ac02"}],"markDefs":[{"_key":"aa8a1fcff9b7","_type":"link","href":"https://github.com/replit/upm"}],"_type":"block","style":"normal"},{"_key":"51c050680983","children":[{"_type":"span","marks":[],"text":"Package managers are a holdover from the old model of programming, when development environments lived on personal computers. Now that development environments (ahem, repls) can run entirely in the cloud, fetching packages from a central server, unzipping them, and installing them into a filesystem seems shockingly archaic.","_key":"51c0506809830"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"e2ad80ea94ec","children":[{"_type":"span","marks":[],"text":"The future is instant. When you press the run button in a repl, your code should run immediately, not pause to fetch packages.","_key":"e2ad80ea94ec0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"0c72919e115f","children":[{"_type":"span","marks":[],"text":"The ","_key":"0c72919e115f0"},{"_type":"span","marks":["b21c8ad801e9"],"text":"Nix","_key":"0c72919e115f1"},{"_type":"span","marks":[],"text":" project unlocks instant repl runs. Nix uses ","_key":"0c72919e115f2"},{"_type":"span","marks":["61f883a825f2"],"text":"content-addressable storage","_key":"0c72919e115f3"},{"_type":"span","marks":[],"text":" for its packages. If you know which package you want to use, you can compute its location on the filesystem without having to search a central repository. Which means we can put every single package on a fast disk in the cloud and skip the fetch-unzip-install cycle. When you press run, your program can instantly access all the packages it needs on a drive already mounted into the repl.","_key":"0c72919e115f4"}],"markDefs":[{"_key":"b21c8ad801e9","_type":"link","href":"https://nixos.org/"},{"_key":"61f883a825f2","_type":"link","href":"https://en.wikipedia.org/wiki/Content-addressable_storage"}],"_type":"block","style":"normal"},{"_key":"3565e251d371","children":[{"_type":"span","marks":[],"text":"The future is reproducible. What does that mean? If your repl works today, it should also work the next time you go to run it.","_key":"3565e251d3710"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"7ea21f1d52aa","children":[{"_type":"span","marks":[],"text":"Package installation is a notoriously flaky part of the old programming model. Packages can conflict and fail to install. Packages can work when installed in one order but not another. The central repository may have a new version of a package that doesn't work with your code. The central repository might be down or unbearably slow.","_key":"7ea21f1d52aa0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"06d9b3156519","children":[{"_type":"span","marks":[],"text":"Reproducibility is core to the Nix project. Each package is identified by a name and a hash. That hash encodes all the inputs to build the package: the source code of the package itself and the hashes of all the packages it depends on. There's no such thing as a conflict. If packages rely on different versions of another package, they will each refer to different hashes and happily just work.","_key":"06d9b31565190"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"57f7c7f66de7","children":[{"_type":"span","marks":[],"text":"The future moves fast.","_key":"57f7c7f66de70"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"c11906b8e14c","children":[{"_type":"span","marks":[],"text":"Prior to Nix, to add a new language, update an existing language, or add a new system package, we'd have to modify and rebuild ","_key":"c11906b8e14c0"},{"_type":"span","marks":["e86ac3097df6"],"text":"Polygott","_key":"c11906b8e14c1"},{"_type":"span","marks":[],"text":", Replit's base Docker image. It's scary to rollout Polygott changes: any repl may break due to a change in that base image. So we only rollout new Polygott versions when it's absolutely necessary, meaning that languages can grow severely out of date. Downloading a 15GB image to thousands of virtual machines also takes a long time, making rollouts a chore.","_key":"c11906b8e14c2"}],"markDefs":[{"_key":"e86ac3097df6","_type":"link","href":"https://github.com/replit/polygott"}],"_type":"block","style":"normal"},{"_key":"599502008e8c","children":[{"_type":"span","marks":[],"text":"Now all we have to do to update languages is create a new template. Existing repls will still use the exact packages they were built with. They'll continue to run. Newly-created repls will use the latest and greatest. No more plodding rollouts.","_key":"599502008e8c0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"1c0a2a698b9e","children":[{"_type":"span","marks":[],"text":"Replit has a history of betting on nascent technologies. The first version of Replit used WebAssembly long before WebAssembly found widespread adoption. We're betting that the Nix project will improve performance across the board, sidestep a whole slew of bugs for our community, and let any Replit user build and publish programming environments.","_key":"1c0a2a698b9e0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"abd87a447ff1","children":[{"_type":"span","marks":[],"text":"We support Nix in a variety of ways. First, by including Nix in every repl we bring this technology to millions of programmers of all experience levels. Second, by building infrastructure to power Nix in production and sharing that ","_key":"abd87a447ff10"},{"_type":"span","marks":["bbf29dac6513"],"text":"knowledge","_key":"abd87a447ff11"},{"_type":"span","marks":[],"text":" with the world. And, as we said above, we have made a $25,000 contribution to the ","_key":"abd87a447ff12"},{"_type":"span","marks":["a4421adb68bf"],"text":"NixOS Foundation","_key":"abd87a447ff13"},{"_type":"span","marks":[],"text":" to further mainline Nix development and make programs such as the Summer of Nix possible.","_key":"abd87a447ff14"}],"markDefs":[{"_key":"bbf29dac6513","_type":"link","href":"https://blog.replit.com/nix-perf-improvements"},{"_key":"a4421adb68bf","_type":"link","href":"https://nixos.org/community/index.html"}],"_type":"block","style":"normal"}],"publishedAt":"2021-10-25T00:06:40.000Z"}