{"_id":"post-900803b8-2cd5-4315-8667-f065f0c2ea21","_type":"post","title":"History++ - A Better Way to Do Versioning","slug":{"_type":"slug","current":"history2-release"},"body":[{"_key":"c34b68f35f37","children":[{"_type":"span","marks":[],"text":"Have you ever had to start over on a piece of code because you overwrote something by accident? Made an edit, replaced it, and then wished you could go back?","_key":"c34b68f35f370"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"a4d5b1cc67cf","children":[{"_type":"span","marks":[],"text":"Programmers have tools like ","_key":"a4d5b1cc67cf0"},{"_type":"span","marks":["code"],"text":"git","_key":"a4d5b1cc67cf1"},{"_type":"span","marks":[],"text":" and the undo/redo stack to help them deal with challenges like this. Replit, of course, supports these things.","_key":"a4d5b1cc67cf2"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"df8fb7e3a609","children":[{"_type":"span","marks":[],"text":"But, we think there's a better way. Over the last week, we rolled out the new history UI to general availability. Here's what it looks like:","_key":"df8fb7e3a6090"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"136c6f970a29","children":[{"_type":"span","_key":"136c6f970a290","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"fe82f6212c67","children":[{"_type":"span","marks":[],"text":"The Basics","_key":"fe82f6212c670"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"514c295e7e35","children":[{"_type":"span","marks":[],"text":"First, a bit of background. Whenever you make changes to your code, we add the ","_key":"514c295e7e350"},{"_type":"span","marks":["6e285fb8637c","em"],"text":"operational transformations","_key":"514c295e7e351"},{"_type":"span","marks":[],"text":" (OTs) to a log of activity for that file. OTs are part of our multiplayer infrastructure, they effectively store the \"intended change\" every time you edit a file. We use this for reconciling potential conflicts when many users edit a file simultaneously.","_key":"514c295e7e352"}],"markDefs":[{"_key":"6e285fb8637c","_type":"link","href":"https://en.wikipedia.org/wiki/Operational_transformation"}],"_type":"block","style":"normal"},{"_key":"bb5012fde4c9","children":[{"_type":"span","marks":[],"text":"It turns out, this makes for a pretty cool approach to versioning and history. You don't have to do anything to benefit from it (it is happening anyway) and it produces a high-fidelity take on the historical states of your file, with no real mental overhead.","_key":"bb5012fde4c90"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"355709233dc9","children":[{"_type":"span","_key":"355709233dc90","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"89e0be66a66e","children":[{"_type":"span","marks":[],"text":"The Utility","_key":"89e0be66a66e0"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"aed9896786a9","children":[{"_type":"span","marks":[],"text":"With version control system based history, like ","_key":"aed9896786a90"},{"_type":"span","marks":["code"],"text":"git","_key":"aed9896786a91"},{"_type":"span","marks":[],"text":", you have to make an active decision to create a commit, so your intermediary states get lost. Worse, for many users, the concepts and interface are difficult. We love ","_key":"aed9896786a92"},{"_type":"span","marks":["code"],"text":"git","_key":"aed9896786a93"},{"_type":"span","marks":[],"text":", but it is just a piece of the puzzle.","_key":"aed9896786a94"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"5784d81d8d1b","children":[{"_type":"span","marks":[],"text":"Here, you can browse a file's history, exploring it with the same interface that you normally use, seeing every change that has been made to it, and non-destructively restore to any specific version. We aimed for this to be lightweight, low-risk, and easy to use: a complement to the tools you are already using.","_key":"5784d81d8d1b0"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"7886c3e3aa60","children":[{"_type":"span","_key":"7886c3e3aa600","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"40b8f9001775","children":[{"_type":"span","marks":[],"text":"Once you've found a version you think is relevant or interesting, you can toggle on compare mode to see a side-by-side diff. You can also select and copy some subset of the version or click restore to bring your file back to where it used to be.","_key":"40b8f90017750"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"9649dbb1fd1f","children":[{"_type":"span","_key":"9649dbb1fd1f0","text":"","marks":[]}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"1aecc0909095","children":[{"_type":"span","marks":[],"text":"The Fun","_key":"1aecc09090950"}],"markDefs":[],"_type":"block","style":"h2"},{"_key":"d105242af818","children":[{"_type":"span","marks":[],"text":"One really cool way we've been seeing people use this is to use the playback feature -- which lets you watch your file's history like it is a movie -- to make videos of their programming sessions.","_key":"d105242af8180"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"56cc66e5a744","children":[{"_type":"span","marks":[],"text":"We're going to do more to support sharing and social integration of these sessions going forward, but for now, it is already a really cool way to retroactively decide to share how you were thinking.","_key":"56cc66e5a7440"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"9a9aa9cb0983","children":[{"_type":"span","marks":[],"text":"Some other neat upgrades:","_key":"9a9aa9cb09830"}],"markDefs":[],"_type":"block","style":"normal"},{"_key":"abc07ac9b210","children":[{"_type":"span","marks":["strong"],"text":"Dark mode","_key":"abc07ac9b2100"},{"_type":"span","marks":[],"text":": Old history didn't support dark mode. Sorry. New history does though!","_key":"abc07ac9b2101"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"52fe58c4d607","children":[{"_type":"span","marks":["strong"],"text":"Mobile support","_key":"52fe58c4d6070"},{"_type":"span","marks":[],"text":": Maybe you noticed that old history was real awkward on small screens? Mobile now gets first class history support!","_key":"52fe58c4d6071"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"},{"_key":"18888c386e8a","children":[{"_type":"span","marks":["strong"],"text":"General polish","_key":"18888c386e8a0"},{"_type":"span","marks":[],"text":": You can browse the file tree like you would in the rest of your Repl, interact with a particular version like it is your regular code: copy-and-paste, compare, restore, and more.","_key":"18888c386e8a1"}],"markDefs":[],"_type":"block","style":"normal","level":1,"listItem":"bullet"}],"publishedAt":"2022-09-15T00:00:00.000Z"}